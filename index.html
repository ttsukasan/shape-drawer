<!doctype html>
<html class="no-js" lang="ja">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Shape Drawer</title>
  <link rel="stylesheet" href="css/style.css">
  <meta name="description" content="">

  <link rel="icon" href="/favicon.ico" sizes="any">
  <link rel="stylesheet" href="https://unpkg.com/chota@latest">

  <meta name="theme-color" content="#fafafa">
</head>

<body>
<main class="container">
  <h1>Shape Drawer</h1>
  <p>
    ウェブブラウザ上で図形を描画できるブックマークレットです。<br/>
    スクリーンショットの中で重要な部分を強調して、より分かりやすくできます。
  </p>
  <h3>インストール</h3>
  <p>
    <a class="button primary"
       href="javascript:window.__tt||={},__tt.draggableCircle||=class{el=null;handles=[];isDragging=!1;isResizing=!1;width=200;height=200;mouseX=0;mouseY=0;boundResize=null;boundStopResize=null;constructor(){this.initElement(),document.body.prepend(this.el),this.initEvents(),this.boundResize=null,this.boundStopResize=null}initElement(){this.el=document.createElement(&quot;div&quot;),this.ellipse=document.createElement(&quot;div&quot;),this.deleteBtn=document.createElement(&quot;div&quot;),Object.assign(this.deleteBtn.style,{position:&quot;absolute&quot;,top:&quot;0&quot;,right:&quot;0&quot;,width:&quot;20px&quot;,height:&quot;20px&quot;,background:&quot;rgb(227, 57, 78)&quot;,color:&quot;white&quot;,display:&quot;flex&quot;,alignItems:&quot;center&quot;,justifyContent:&quot;center&quot;,cursor:&quot;pointer&quot;,userSelect:&quot;none&quot;,visibility:&quot;hidden&quot;}),this.deleteBtn.textContent=&quot;✖&quot;,this.deleteBtn.addEventListener(&quot;click&quot;,(()=>{this.deleteElement()})),this.setPositionToScreenTopLeft(),this.updateStyle(),this.updateEllipseStyle(),this.el.appendChild(this.ellipse),this.el.appendChild(this.deleteBtn),this.createResizeHandles()}updateStyle(){Object.assign(this.el.style,{width:`${this.width}px`,height:`${this.height}px`,position:&quot;absolute&quot;,zIndex:&quot;999999&quot;,cursor:&quot;move&quot;,display:&quot;flex&quot;,justifyContent:&quot;center&quot;,alignItems:&quot;center&quot;,userSelect:&quot;none&quot;})}updateEllipseStyle(){Object.assign(this.ellipse.style,{width:&quot;100%&quot;,height:&quot;100%&quot;,border:&quot;4px solid #EC71A1&quot;,borderRadius:&quot;15px&quot;,boxShadow:&quot;0px 10px 30px rgba(0,0,0,0.2)&quot;})}createResizeHandles(){const e=document.createElement(&quot;div&quot;);Object.assign(e.style,{position:&quot;absolute&quot;,width:&quot;20px&quot;,height:&quot;20px&quot;,bottom:&quot;-8px&quot;,right:&quot;-8px&quot;,background:&quot;linear-gradient(135deg, rgba(227,57,78,1) 40%, rgba(0,0,0,0) 40%, rgba(0,0,0,0) 60%, rgba(227,57,78,1) 60%)&quot;,cursor:&quot;nwse-resize&quot;,visibility:&quot;hidden&quot;}),this.handles.push(e),this.el.appendChild(e),e.addEventListener(&quot;mousedown&quot;,(e=>{this.initResize(e)}))}initResize(e){e.stopPropagation(),this.isResizing=!0,this.mouseX=e.clientX,this.mouseY=e.clientY,this.boundResize=this.resize.bind(this),this.boundStopResize=this.stopResize.bind(this),document.addEventListener(&quot;mousemove&quot;,this.boundResize),document.addEventListener(&quot;mouseup&quot;,this.boundStopResize),this.handles.forEach((e=>e.style.visibility=&quot;visible&quot;))}resize(e){if(this.isResizing){const t=e.clientX-this.mouseX,i=e.clientY-this.mouseY;this.width=Math.max(40,this.width+t),this.height=Math.max(40,this.height+i),this.updateStyle(),this.updateEllipseStyle(),this.mouseX=e.clientX,this.mouseY=e.clientY}}stopResize(){this.isResizing&amp;&amp;(this.isResizing=!1,this.el.matches(&quot;:hover&quot;)||this.handles.forEach((e=>e.style.visibility=&quot;hidden&quot;))),document.removeEventListener(&quot;mousemove&quot;,this.boundResize),document.removeEventListener(&quot;mouseup&quot;,this.boundStopResize),this.boundResize=null,this.boundStopResize=null}setPositionToScreenTopLeft(){const e=window.scrollX,t=window.scrollY;this.el.style.left=`${e+15}px`,this.el.style.top=`${t+15}px`}initEvents(){this.el.addEventListener(&quot;mousedown&quot;,(e=>{e.preventDefault();const t=this.el.getBoundingClientRect();this.offsetX=e.clientX-t.left,this.offsetY=e.clientY-t.top,this.isDragging=!0,this.el.style.opacity=&quot;0.8&quot;})),document.addEventListener(&quot;mousemove&quot;,(e=>{if(this.isDragging){e.preventDefault();const t=e.clientX-this.offsetX+window.scrollX,i=e.clientY-this.offsetY+window.scrollY;this.el.style.left=`${t}px`,this.el.style.top=`${i}px`}})),document.addEventListener(&quot;mouseup&quot;,(()=>{this.isDragging&amp;&amp;(this.isDragging=!1,this.el.style.opacity=&quot;1&quot;)})),this.el.addEventListener(&quot;mouseenter&quot;,(()=>{this.handles.forEach((e=>{e.style.visibility=&quot;visible&quot;})),this.deleteBtn.style.visibility=&quot;visible&quot;})),this.el.addEventListener(&quot;mouseleave&quot;,(()=>{this.isResizing||this.handles.forEach((e=>{e.style.visibility=&quot;hidden&quot;})),this.deleteBtn.style.visibility=&quot;hidden&quot;}))}deleteElement(){document.body.removeChild(this.el)}},__tt[`${Date.now()}`]=new __tt.draggableCircle;void(0);">
      角丸四角形を描画
    </a>
  </p>
  <p>上のボタンをブックマークバーにドラッグしてください。</p>
  <h3>使い方</h3>
  <p>ブックマークをクリックすると、画面上に角丸四角形が描画されます。</p>
  <ul>
    <li>図形をドラッグすると移動できます。</li>
    <li>図形にマウスカーソルを乗せると、リサイズ用のハンドルと削除ボタンが表示されます。</li>
    <li>図形の右下のハンドルをドラッグするとリサイズできます。</li>
    <li>図形の右上の削除ボタンをクリックすると消去されます。</li>
  </ul>
</main>
<script src="js/app.js"></script>
</body>
</html>
